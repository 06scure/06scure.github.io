---
title: Gemini-CLI 配置指北
date: 2025/08/23 12:00:00
tags:
  - Python
  - 大模型
categories:
  - 工具配置
---
## 1. 前言

在ChatGPT更新到GPT-5之后，每日的免费额度变低，对指令的理解不清晰，沟通起来很痛苦，果断寻找新的工具提升生产效率，Gemini-CLI高达每日1000次，100万上下文token的窗口，让AI不再弱智。
## 2. Node.js安装

在部署gemini之前，我们首先需要部署npm。nvm和npm类似conda和python，作为一个版本管理器存在。参考[微软文档](https://learn.microsoft.com/zh-cn/windows/dev-environment/javascript/nodejs-on-windows)进行部署，首先下载nvm，[下载地址]([Releases · coreybutler/nvm-windows](https://github.com/coreybutler/nvm-windows/releases))在Windows端下载.exe即可。

![](https://qiniu.mingxuan.xin/picgo/20251214211037418.png)

软件不大，只有5M，全部默认安装即可。
![](https://qiniu.mingxuan.xin/picgo/20251214190436965.png)
安装成功。
![](https://qiniu.mingxuan.xin/picgo/20251214211043094.png)

接下来安装Node.js。
```bash
nvm install latest
```
```bash
24.6.0
Downloading node.js version 24.6.0 (64-bit)...
Extracting node and npm...
Complete
Installation complete.
If you want to use this version, type:

nvm use 24.6.0
```
然后我们激活刚刚安装的Node环境。
```bash
#查看Node版本
nvm ls
#激活版本
nvm use 24.6.0
#验证安装的版本
npm --version
```
powershell可能会禁用脚本，如果无法运行npm，就用CMD。或者参考[npm : 无法加载文件 C:\Program Files\nodejs\npm.ps1，因为在此系统上禁止运行脚本。 - 知乎](https://zhuanlan.zhihu.com/p/5062435150)启动。
![](https://qiniu.mingxuan.xin/picgo/20251214211048441.png)
	
## 3. Gemini CLI 部署

接下来继续安装Gemini CLI
```bash
npm install -g @google/gemini-cli@latest
```
这边没给cmd设置代理，下载的比较慢，5M下载了5分钟。
下载好之后我们要先设置一些全局变量，可以考虑在windows环境变量中设置，或者可以set。
![](https://qiniu.mingxuan.xin/picgo/20251214211058222.png)

```bash
set HTTP_PROXY=http://127.0.0.1:7897/   #代理地址
set HTTPS_PROXY=http://127.0.0.1:7897/  #同上 
set GOOGLE_CLOUD_PROJECT=你的项目ID
set GEMINI_API_KEY=你的APIKey
```
 - 怎么获取项目ID？
 首先访问[谷歌控制台](https://console.cloud.google.com/),如果没有项目则创建一个项目，这里会有项目ID。
![](https://qiniu.mingxuan.xin/picgo/20251214211140782.png)

 - 怎样获取APIKey?
 访问：[Get API key | Google AI Studio](https://aistudio.google.com/apikey)这里需要注意，Google AI Studio不支持香港澳门，梯子不要挂到那些地方。
![](https://qiniu.mingxuan.xin/picgo/20251214211148588.png)

 在这里为刚刚的项目申请一个API，然后复制API到环境变量中。
![](https://qiniu.mingxuan.xin/picgo/20251214211154055.png)

 万事俱备，我们可以直接运行一下gemini了，为了防止终端未加载环境变量，记得把终端重启一下再运行。
```bash
 gemini
```
![](https://qiniu.mingxuan.xin/picgo/20251214211201427.png)

这里直接选择1，登录即可。
![](https://qiniu.mingxuan.xin/picgo/20251214211206810.png)

成功载入。

## 4. 代码实战

在写具体代码之前，Gemini有很多小毛病，比如说他很”犟“，喜欢读取缓存而不是重新读取文件，导致我们自己修改的代码被他删掉。因此我们需要先设置一个全局预设词。

在用户的文件夹下如`C:\Users\Obscure\.gemini`新建一个GEMINI.md，并输入以下内容：
```markdown
## Gemini Added Memories
- 请使用中文进行思考和沟通。
- 对于复杂代码修改，优先使用`write_file`而非`replace`。
- 进行代码修改时，必须使用‘读取-修改-重写’的完整流程，绝不允许因图方便而使用部分内容覆写文件，导致代码丢失。
- 保持良好的代码书写习惯，遵守PEP484规范，并适当的为代码添加注释，提高可读性。
```
![](https://qiniu.mingxuan.xin/picgo/20251214211747876.png)

接下来，我们以[facebookresearch/vggt: [CVPR 2025 Best Paper Award] VGGT: Visual Geometry Grounded Transformer](https://github.com/facebookresearch/vggt)的代码为例，去学习使用Gemini-CLI。
在项目目录下右键，在终端中打开。
![](https://qiniu.mingxuan.xin/picgo/20251214211752594.png)

然后运行gemini。提示：Using: 1 GEMINI.md file，代表我们刚刚设置的全局prompt生效了。对于一个崭新的项目，首先是要让AI理解他。我们执行：
```
/init
```
Gemini会去阅读整个项目的文档，然后在项目目录下生成一个GEMINI.md去总结整个项目。
![](https://qiniu.mingxuan.xin/picgo/20251214211757715.png)

这里我们直接回车，他就创建好了。接下来，我们需要阅读整个源码，但是看不太懂，怎么办呢？让AI帮我们写注释。比如说我想阅读VGGT的特征提取部分，所以我们可以这样说：
```
请用中文帮我给@vggt/models/aggregator.py 的注释写完整
```
这里涉及到了一个用法`@`，`@`可以用来喂给AI特定的文件，因此他在操作之前，会先读取我们`@`的文件或是文件夹，这方便他理解整个代码的含义。当他修改完之后，我们可以选择在`3. 编译器中查看`:
![](https://qiniu.mingxuan.xin/picgo/20251214211801622.png)

查看后可以选择修改。
也可以选择在vscode中直接运行gemini，记得在插件市场安装Gemini CLI Companion，这样就非常方便了。

![](https://qiniu.mingxuan.xin/picgo/20251214211809612.png)

还有一些我们常用的指令，当一天的工作结束后，可以选择保存会话，第二天继续。
```
# 用于保存和读取会话
/chat save [名称]
/chat resume [名称]
```
当上下文长度过长，AI的处理速度变慢之后，可以考虑压缩上下文，加快速度，节省token。
```
#用于压缩token
/compress
```

## 参考链接

 - [在本机 Windows 上设置 Node.js | Microsoft Learn](https://learn.microsoft.com/zh-cn/windows/dev-environment/javascript/nodejs-on-windows)
 - [Gemini CLI 中文文档](https://gemini-cli.doczh.com/)
 - [npm : 无法加载文件 C:\Program Files\nodejs\npm.ps1，因为在此系统上禁止运行脚本。 - 知乎](https://zhuanlan.zhihu.com/p/5062435150)
 - [别再搜了！这才是 Gemini CLI 登录报错的终极解决方案！ - 知乎](https://zhuanlan.zhihu.com/p/1930940169525138787)
 - [VGGT: Visual Geometry Grounded Transformer](https://vgg-t.github.io/)

